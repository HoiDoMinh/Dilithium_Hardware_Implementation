
module polyz_unpack(
    input [5119:0]a_in,        // 640 bytes = 5120 bits     
    output [8191:0] r_out       // 256 coeff × 32-bit
);
    localparam N = 256;
    localparam GAMMA1 = (1 << 19);  

    genvar i;
    generate
        for (i = 0; i < N/2; i = i + 1) begin : pack_loop


            wire signed [7:0] a0 = a_in[8*(5*i+0) + 7 : 8*(5*i+0)];
            wire signed [7:0] a1 = a_in[8*(5*i+1) + 7 : 8*(5*i+1)];
            wire signed [7:0] a2 = a_in[8*(5*i+2) + 7 : 8*(5*i+2)];
	    wire signed [7:0] a3 = a_in[8*(5*i+3) + 7 : 8*(5*i+3)];
	    wire signed [7:0] a4 = a_in[8*(5*i+4) + 7 : 8*(5*i+4)];

            wire [31:0] coeff0 = {
            wire [31:0] coeff1 =  
            
	    wire [31:0] t0 = GAMMA1 - coeff0;
            wire [31:0] t1 = GAMMA1 - coeff1;

            assign r_out[32*(2*i+0) + 7 : 32*(2*i+0)] = t0;
            assign r_out[32*(2*i+1) + 7 : 32*(2*i+1)] = t1;


        end
    endgenerate

endmodule